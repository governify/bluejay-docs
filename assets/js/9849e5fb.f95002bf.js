"use strict";(self.webpackChunkbluejay_docs=self.webpackChunkbluejay_docs||[]).push([[9691],{5296:(e,n,t)=>{t.r(n),t.d(n,{assets:()=>c,contentTitle:()=>o,default:()=>m,frontMatter:()=>s,metadata:()=>i,toc:()=>l});const i=JSON.parse('{"id":"customization/agreement-modeling/team-practices-agreements","title":"Team Practices Agreements","description":"Team Practices Agreements","source":"@site/versioned_docs/version-1.1/customization/agreement-modeling/team-practices-agreements.md","sourceDirName":"customization/agreement-modeling","slug":"/customization/agreement-modeling/team-practices-agreements","permalink":"/customization/agreement-modeling/team-practices-agreements","draft":false,"unlisted":false,"editUrl":"https://github.com/governify/bluejay-docs/edit/main/versioned_docs/version-1.1/customization/agreement-modeling/team-practices-agreements.md","tags":[],"version":"1.1","lastUpdatedBy":"Pablo Fernandez","lastUpdatedAt":1751790370000,"sidebarPosition":1,"frontMatter":{"title":"Team Practices Agreements","description":"Team Practices Agreements","sidebar_position":1,"hide_table_of_contents":false,"keywords":["TPA","Team Practices Agreements","iAgree","agreement modeling","agile auditing","metrics","guarantees","scope","dashboard","JSON agreement","YAML agreement","event collector","infrastructure","Governify","Bluejay"]},"sidebar":"defaultSidebar","previous":{"title":"Dashboards","permalink":"/customization/dashboards"},"next":{"title":"Metrics","permalink":"/customization/agreement-modeling/metrics"}}');var a=t(4848),r=t(8453);const s={title:"Team Practices Agreements",description:"Team Practices Agreements",sidebar_position:1,hide_table_of_contents:!1,keywords:["TPA","Team Practices Agreements","iAgree","agreement modeling","agile auditing","metrics","guarantees","scope","dashboard","JSON agreement","YAML agreement","event collector","infrastructure","Governify","Bluejay"]},o="Team Practices Agreements (TPA)",c={},l=[{value:"Overview",id:"overview",level:2},{value:"General Structure",id:"general-structure",level:2},{value:"Creating a new agreement",id:"creating-a-new-agreement",level:2},{value:"Context",id:"context",level:3},{value:"Validity",id:"validity",level:4},{value:"Infrastructure",id:"infrastructure",level:4},{value:"Definitions",id:"definitions",level:4},{value:"Terms",id:"terms",level:3},{value:"Metrics",id:"metrics",level:4},{value:"Guarantees",id:"guarantees",level:4}];function d(e){const n={a:"a",code:"code",h1:"h1",h2:"h2",h3:"h3",h4:"h4",header:"header",hr:"hr",li:"li",mermaid:"mermaid",p:"p",pre:"pre",ul:"ul",...(0,r.R)(),...e.components};return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(n.header,{children:(0,a.jsx)(n.h1,{id:"team-practices-agreements-tpa",children:"Team Practices Agreements (TPA)"})}),"\n",(0,a.jsx)(n.hr,{}),"\n",(0,a.jsx)(n.h2,{id:"overview",children:"Overview"}),"\n",(0,a.jsxs)(n.p,{children:["Bluejay use Team Practice Agreements (TPAs) instead of Service Level Agreements (SLAs) since the purpose of TPAs is auditing agile teams. Nevertheless, they are the same concept and thus, TPAs must follow ",(0,a.jsx)(n.a,{href:"https://docs.governify.io/about/iAgree",children:"iAgree Syntax"})," just like SLAs in Governify Infrastructure."]}),"\n",(0,a.jsx)(n.p,{children:"TPAs are defined as a JSON or YAML documents that contain all the information to model, measure and audit one or more proccesses or information related with online services. The goal of this file is to provide enough information to retrieve data from the services and measure that the guarantees specified in the agreement are being followed."}),"\n",(0,a.jsx)(n.h2,{id:"general-structure",children:"General Structure"}),"\n",(0,a.jsx)(n.mermaid,{value:"graph TD\n    A[Agreement] --\x3e B(Context)\n    A --\x3e C(Terms)\n    B --\x3e D(Infrastructure)\n    B --\x3e E(Definitions)\n    B --\x3e H(Validity)\n    C --\x3eF(Metrics)\n    C --\x3eG(Guarantees)"}),"\n",(0,a.jsx)(n.h2,{id:"creating-a-new-agreement",children:"Creating a new agreement"}),"\n",(0,a.jsx)(n.p,{children:"We can start a new agreement with the following template and fill all the required data to create one new custom agreement."}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-json",children:'{\n    "id": "Governify Agreement Template",\n    "version": "1.0.0",\n    "type": "agreement",\n    "context": {\n        "validity": {\n            "initial": "2020-01-01",\n            "timeZone": "America/Los_Angeles"\n        },\n        "infrastructure": {\n        },\n        "definitions": {\n            "schemas": {},\n            "scopes": {},\n            "collectors": {},\n            "dashboards": {}\n        }\n    },\n    "terms": {\n        "metrics": {},\n        "guarantees": []\n    }\n}\n'})}),"\n",(0,a.jsx)(n.h3,{id:"context",children:"Context"}),"\n",(0,a.jsx)(n.p,{children:"The context contains the information related about the services for which the data is being extracted and aditional information about the agreement, such as initial/end vality date, time zone, etc."}),"\n",(0,a.jsx)(n.h4,{id:"validity",children:"Validity"}),"\n",(0,a.jsx)(n.p,{children:"The context should specify the validity of the agreement with an initial date and the TimeZone where is being applied. (This timezone is used for metrics and guarantees where the date is a condition factor)\nExample:"}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-json",children:'{\n    "validity": {\n        "initial": "2020-01-01",\n        "timeZone": "America/Los_Angeles"\n    }\n}\n'})}),"\n",(0,a.jsx)(n.h4,{id:"infrastructure",children:"Infrastructure"}),"\n",(0,a.jsx)(n.p,{children:"Contains the information about which services should be used to compute the metrics."}),"\n",(0,a.jsx)(n.p,{children:"In order to retrieve the data and communicate to the different microservices of the Governify ecosystem, the URLs where each component will be deployed should be specified. This should be done in the infrastructure object, as the following example:"}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-json",children:'{\n    "infrastructure": {\n        "registry": "http://localhost:8081/api/v6",\n        "reporter": "http://reporter.bluejay.governify.io/api/v4",\n        "render": "https://ui.bluejay.governify.io/render?model=https://registry.bluejay.governify.io/api/v6/agreements/tpa-1010101010&view=/renders/tpa/default.html&ctrl=/renders/tpa/default.js",\n        "dashboard": "http://dashboard.bluejay.governify.io",\n        "scopeManager": "https://sm.bluejay.governify.io/api/v1"\n    }\n}\n'})}),"\n",(0,a.jsx)(n.h4,{id:"definitions",children:"Definitions"}),"\n",(0,a.jsx)(n.p,{children:"The most important part in the definitions is the scope. The scope defines for which service/person/process applies the metric.\nIf we want to measure a company, we can have for example 3 scopes."}),"\n",(0,a.jsxs)(n.ul,{children:["\n",(0,a.jsx)(n.li,{children:"Project"}),"\n",(0,a.jsx)(n.li,{children:"Team"}),"\n",(0,a.jsx)(n.li,{children:"Member"}),"\n"]}),"\n",(0,a.jsxs)(n.p,{children:["This scope are shared with the metric at the time of computing the metric, so, if we want to calculate for example one metric for all the projects we only have to specify:\n",(0,a.jsx)(n.code,{children:"project: *"})]}),"\n",(0,a.jsx)(n.p,{children:"Scope examples from Team Practice Agreement:"}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-json",children:'{\n    "scopes": {\n        "development": {\n            "project": {\n                "name": "Project",\n                "description": "Project",\n                "type": "string",\n                "default": "1010101010"\n            },\n            "class": {\n                "name": "Class",\n                "description": "Group some projects",\n                "type": "string",\n                "default": "2020202020"\n            }\n        }\n    }\n}\n'})}),"\n",(0,a.jsx)(n.p,{children:"In the definitions object, the services used for collecting information should be specified, in order to be able to compute the metrics values. For example, this is the specification for the event collector in a Team Practices agreement."}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-json",children:'{\n    "computers": {\n        "eventcomputer": {\n            "url": "http://event.collector.bluejay.governify.io",\n            "endpoint": "/computations",\n            "apiVersion": "2",\n            "config": {\n                "scopeManager": "http://sm.bluejay.governify.io/api/v1/scopes/development"\n            }\n        }\n    }\n}\n'})}),"\n",(0,a.jsxs)(n.p,{children:["And finally, to be able to visualize all the data from the guarantees and metrics specified, at least one dashboard must be specified. You can see all the dashboard configuration in the ",(0,a.jsx)(n.a,{href:"https://docs.governify.io/development/services/dashboard",children:"Dashboard Modeling"})," section. One simple dashboard configuration could be:"]}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-json",children:'{\n    "dashboards": {\n        "team-dashboard":{\n            "default": true,\n            "overlay": "/blocks/overlay.js",\n            "base": "/blocks/base.json",\n            "modifier": "/blocks/modifier.js",\n            "config": {\n                "blocks": [\n                    {\n                        "type": "time-graph",\n                        "guarantee": "NUMBER_MASTER_PR_MERGE_WEEKLY_OVER_1_OR_EQUAL",\n                        "config": {\n                        }\n                    }\n                ]\n            }\n        }\n    }\n}\n\n'})}),"\n",(0,a.jsx)(n.h3,{id:"terms",children:"Terms"}),"\n",(0,a.jsx)(n.p,{children:"The agreement terms are composed by two parts; metrics, and guarantees. The sections below explain how to model each one of them."}),"\n",(0,a.jsx)(n.h4,{id:"metrics",children:"Metrics"}),"\n",(0,a.jsx)(n.p,{children:"Every metric in the agreement contains all the necessary information to retrieve specific data from the services and get a final value (Boolean, Integer, String, etc.) from this data. The metric configuration is dependant of the collector used. This is an example from a Team Practice agreement using the Event Collector."}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-json",children:'{\n    "PERCENTAGE_OPENPR_FINISHEDSTORIES_BIND": {\n        "collector": {\n            "$ref": "#/context/definitions/collectors/eventcollector"\n        },\n        "measure": {\n            "computing": "actual",\n            "element": {\n                "percentage": {\n                    "related": {\n                        "github": {\n                            "allPR": {\n                                "head": {\n                                    "ref": "#CONTAINS(primary_resources.0.id)#"\n                                }\n                            }\n                        },\n                        "window": 86400\n                    }\n                }\n            },\n            "event": {\n                "pivotal": {\n                    "activity": {\n                        "highlight": "finished"\n                    }\n                }\n            },\n            "scope": {\n                "$ref": "#/context/definitions/scopes/development"\n            }\n        }\n    }\n}\n'})}),"\n",(0,a.jsxs)(n.p,{children:["You can see a complete guide about metric modelling in the ",(0,a.jsx)(n.a,{href:"/customization/agreement-modeling/metrics",children:"Metrics section"}),"."]}),"\n",(0,a.jsx)(n.h4,{id:"guarantees",children:"Guarantees"}),"\n",(0,a.jsx)(n.p,{children:"The guarantees specify the quality or performance that the metrics should have. The objective is a formula that can be composed from one or more metrics. The window object refers to the calculation timing, where the period is used for how the period of time are splitted in time."}),"\n",(0,a.jsx)(n.p,{children:"For example for a daily period there will be one data point for each day, and the metric is calculated from all the data from that day. This is an example using the metric from the previous example:"}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-json",children:'{\n    "id": "75_PERCENT_NEWBRANCH_STARTEDSTORIES_WITHIN_A_DAY_BIND",\n    "description": "At least 75% of started stories must match a creation of a branch within a day.",\n    "scope": {\n        "$ref": "#/context/definitions/scopes/development"\n    },\n    "of": [\n        {\n            "scope": {\n                "project": "1010101010"\n            },\n            "objective": "PERCENTAGE_NEWBRANCH_STARTEDSTORIES_BIND >= 75",\n            "with": {\n                "PERCENTAGE_NEWBRANCH_STARTEDSTORIES_BIND": {}\n            },\n            "window": {\n                "type": "static",\n                "period": "daily",\n                "initial": "2018-01-01"\n            }\n        }\n    ]\n}\n'})}),"\n",(0,a.jsxs)(n.p,{children:["You can see a complete guide about guarantees modelling in the ",(0,a.jsx)(n.a,{href:"/customization/agreement-modeling/guarantees",children:"Guarantees section"}),"."]})]})}function m(e={}){const{wrapper:n}={...(0,r.R)(),...e.components};return n?(0,a.jsx)(n,{...e,children:(0,a.jsx)(d,{...e})}):d(e)}},8453:(e,n,t)=>{t.d(n,{R:()=>s,x:()=>o});var i=t(6540);const a={},r=i.createContext(a);function s(e){const n=i.useContext(r);return i.useMemo((function(){return"function"==typeof e?e(n):{...n,...e}}),[n,e])}function o(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(a):e.components||a:s(e.components),i.createElement(r.Provider,{value:n},e.children)}}}]);